<?php
// auto-generated by sfPropelAdmin
// date: 2007/03/25 16:05:26
?>
<?php echo form_tag('nomfalperlot/edit', array(
  'id'        => 'sf_admin_edit_form',
  'name'      => 'sf_admin_edit_form',
  'multipart' => true,
)) ?>

<?php echo object_input_hidden_tag($npnomina, 'getId') ?>

<fieldset id="sf_fieldset_none" class="">
<legend>Tipo de Nomina</legend>
<div class="form-row">
  <?php echo label_for('npnomina[codnom]','Codigo', 'class="required" ') ?>
  <div class="content<?php if ($sf_request->hasError('npnomina{codnom}')): ?> form-error<?php endif; ?>">
  <?php if ($sf_request->hasError('npnomina{codnom}')): ?>
    <?php echo form_error('npnomina{codnom}', array('class' => 'form-error-msg')) ?>
  <?php endif; ?>
&nbsp;&nbsp;
  <?php $value = object_input_tag($npnomina, 'getCodnom', array (
  'size' => 20,
  'control_name' => 'npnomina[codnom]',
  'maxlength' => 3,
)); echo $value ? $value : '&nbsp;' ?>
&nbsp;
<?php echo button_to('...','#') ?>
&nbsp;&nbsp;
<strong><? echo $npnomina->getNomnom() ?></strong>
</div>
<br>   
  <?php echo label_for('fecdes','Fecha de la Falta o Permiso', 'class="required" ') ?>
  &nbsp;&nbsp;
  <?
  if ($nuevo=='S')
  {
  ?>
  <?php 
  $value = object_input_date_tag($npnomina, 'getProfec', array (
  'rich' => true,
  'calendar_button_img' => '/sf/sf_admin/images/date.png',
  'control_name' => 'npnomina[profec]',
  'date_format' => 'dd/MM/yyyy',
)); echo $value ? $value : '&nbsp;' ?>
<?
}
else
{
?>
<?php 
  $value = object_input_date_tag($npnomina, 'getFecdes', array (
  'rich' => true,
  'calendar_button_img' => '/sf/sf_admin/images/date.png',
  'control_name' => 'npnomina[fecdes]',
  'date_format' => 'dd/MM/yyyy',
)); echo $value ? $value : '&nbsp;' ?>
<?
}
?>
  &nbsp;&nbsp;
</div>
</fieldset>
&nbsp;&nbsp;
<? 
if ($detalles!=''){
?>
<div>
<fieldset>
<legend>Empleados Marcados por Falta o Permiso</legend>
<div id="grid02" class="grid01">
<table border="0" class="sf_admin_list">
<?
if ($nuevo=='S') 
 $titulo=array(0 => 'Cedula', 1 => 'Nombre', 2 => 'Cargo', 3 => 'Motivo Falta o Permiso', 4 => '');
else
  $titulo=array(0 => 'Cedula', 1 => 'Nombre', 2 => 'Cargo', 3 => 'Motivo Falta o Permiso');

if ( count($detalles)>0){
$i=0;
foreach ($detalles as $k=>$fila) {
    $i++;
    if($i==1){?>
      <thead><tr>
    <? foreach ($fila as $key => $value){?>
        <th><?=$titulo[$key]?></th>
    <? }?>
      </tr> </thead>
    <? }?>
<tr>
<? foreach ($fila as $key => $value){?>
    <td><? if (trim($value)=='K')
             echo checkbox_tag($i,'1',false);
            else if (trim($value)=='Q')
               echo select_tag('motivofalta', options_for_select(array(
				  '01'  => '',
				  '02'  => 'Permiso No Remunerado',
				  '03'  => 'Permiso Justificado',   
				), '01'),'style=border:none');
            else 
              echo $value;?></td>
<? }?>
</tr>
<? }
  }
?></table>
</div>
</fieldset>
</div>
<?
}
?>

<?php include_partial('edit_actions', array('npnomina' => $npnomina)) ?>

</form>

<ul class="sf_admin_actions">
      <li class="float-left"><?php if ($npnomina->getId()): ?>
<?php echo button_to(__('delete'), 'nomfalperlot/delete?id='.$npnomina->getId(), array (
  'post' => true,
  'confirm' => __('Are you sure?'),
  'class' => 'sf_admin_action_delete',
)) ?><?php endif; ?>
</li>
  </ul>
